<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VANGUARD NEXUS | GLOBAL</title>
    
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database-compat.js"></script>
    
    <style>
        @import url('https://fonts.cdnfonts.com/css/valorant');
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap');

        :root {
            --v-purple: #9333ea; --v-cyan: #00f2ff; --v-pink: #ff00ea;
            --color-primary: #7380ec; --color-danger: #ff7782; --color-success: #41f1b6;
            --color-warning: #ffbb55; --color-white: #fff; --color-info-dark: #7d8da1;
            --color-dark: #363949; --color-light: rgba(132, 139, 200, 0.18);
            --color-background: #f6f6f9; --card-border-radius: 2rem;
            --box-shadow: 0 2rem 3rem var(--color-light);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; text-decoration: none; list-style: none; border: 0; outline: none; }
        body { background: var(--color-background); overflow-x: hidden; }
        
        /* --- GİRİŞ/KAYIT EKRANI (DOKUNULMADI) --- */
        #auth-screen {
            font-family: 'Segoe UI', sans-serif; background-color: #c9d6ff; height: 100vh; width: 100%;
            position: fixed; z-index: 100000; display: flex; align-items: center; justify-content: center;
        }
        .auth-container { background-color: #fff; border-radius: 30px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.35); position: relative; overflow: hidden; width: 768px; max-width: 95%; min-height: 480px; }
        .form-container { position: absolute; top: 0; height: 100%; transition: all 0.6s ease-in-out; }
        .sign-in { left: 0; width: 50%; z-index: 2; }
        .auth-container.active .sign-in { transform: translateX(100%); }
        .sign-up { left: 0; width: 50%; opacity: 0; z-index: 1; }
        .auth-container.active .sign-up { transform: translateX(100%); opacity: 1; z-index: 5; animation: move 0.6s; }
        @keyframes move { 0%, 49.99% { opacity: 0; z-index: 1; } 50%, 100% { opacity: 1; z-index: 5; } }
        form { background-color: #fff; display: flex; align-items: center; justify-content: center; flex-direction: column; padding: 0 40px; height: 100%; text-align: center; }
        .auth-input { background-color: #eee; border: none; margin: 8px 0; padding: 10px 15px; font-size: 13px; border-radius: 8px; width: 100%; }
        .auth-btn { background-color: var(--v-purple); color: #fff; font-size: 12px; padding: 10px 45px; border-radius: 8px; font-weight: 600; cursor: pointer; text-transform: uppercase; margin-top: 10px; }
        .toggle-container { position: absolute; top: 0; left: 50%; width: 50%; height: 100%; overflow: hidden; transition: all 0.6s ease-in-out; z-index: 1000; }
        .auth-container.active .toggle-container { transform: translateX(-100%); border-radius: 0 150px 100px 0; }
        .toggle { background: linear-gradient(to right, #5c67ff, var(--v-purple)); color: #fff; position: relative; left: -100%; height: 100%; width: 200%; transition: all 0.6s ease-in-out; }
        .auth-container.active .toggle { transform: translateX(50%); }
        .toggle-panel { position: absolute; width: 50%; height: 100%; display: flex; align-items: center; justify-content: center; flex-direction: column; padding: 0 30px; text-align: center; top: 0; transition: all 0.6s ease-in-out; }
        .toggle-left { transform: translateX(-200%); }
        .auth-container.active .toggle-left { transform: translateX(0); }
        .toggle-right { right: 0; }
        .auth-container.active .toggle-right { transform: translateX(200%); }

        /* --- DASHBOARD --- */
        #dashboard { 
            display: none; width: 96%; margin: 0 auto; gap: 1.8rem; grid-template-columns: 14rem auto 23rem;
            font-family: 'Poppins', sans-serif; min-height: 100vh;
        }

        aside { height: 100vh; }
        aside .top { display: flex; align-items: center; justify-content: space-between; margin-top: 1.4rem; }
        aside .sidebar { display: flex; flex-direction: column; height: 86vh; position: relative; top: 3rem; }
        aside .sidebar a { display: flex; color: var(--color-info-dark); margin-left: 2rem; gap: 1rem; align-items: center; position: relative; height: 3.7rem; transition: all 300ms ease; cursor: pointer; }
        aside .sidebar a span { font-size: 1.6rem; transition: all 300ms ease; }
        aside .sidebar a.active { background: var(--color-light); color: var(--color-primary); margin-left: 0; }
        aside .sidebar a.active:before { content: ""; width: 6px; height: 100%; background: var(--color-primary); }
        aside .sidebar a:hover { color: var(--color-primary); }

        main { margin-top: 1.4rem; width: 100%; }
        
        /* Butonlar Grid Sistemi (Ekran boyutuna göre otomatik dizilir) */
        main .insights { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); 
            gap: 1.2rem; 
        }
        main .insights > div { 
            background: var(--color-white); padding: 1.5rem; 
            border-radius: var(--card-border-radius); box-shadow: var(--box-shadow); 
            transition: 0.3s; cursor: pointer; text-align: center;
        }
        main .insights > div:hover { box-shadow: none; transform: scale(1.02); }
        main .insights h3 { margin-top: 0.8rem; font-size: 0.85rem; font-family: 'VALORANT'; letter-spacing: 1px; }
        
        /* GRAFİK TABLOSU DÜZENLEME (BOYUTU SINIRLANDIRILDI) */
        .chart-container { 
            background: var(--color-white); border-radius: var(--card-border-radius); 
            padding: 1.5rem; margin-top: 2rem; box-shadow: var(--box-shadow); 
            width: 100%; height: 300px; /* Yükseklik sabitlendi */
            position: relative;
        }

        .right { margin-top: 1.4rem; }
        .right .top { display: flex; justify-content: end; gap: 2rem; }
        .right .profile { display: flex; gap: 1rem; text-align: right; }
        
        .global-chat-modern { margin-top: 2rem; background: var(--color-white); padding: 1.5rem; border-radius: var(--card-border-radius); box-shadow: var(--box-shadow); height: 400px; display: flex; flex-direction: column; }
        #chat-messages { flex: 1; overflow-y: auto; font-size: 0.85rem; margin-bottom: 1rem; }
        .chat-input-area { display: flex; gap: 0.5rem; border-top: 1px solid var(--color-light); padding-top: 1rem; }
        .chat-input-area input { width: 100%; background: var(--color-background); padding: 0.8rem; border-radius: 1rem; }

        /* RESPONSIVE AYARLAR */
        @media screen and (max-width: 1200px) {
            #dashboard { grid-template-columns: 7rem auto 23rem; }
            aside .sidebar h3 { display: none; }
        }
        @media screen and (max-width: 992px) {
            #dashboard { grid-template-columns: 1fr; }
            aside { display: none; }
            .right { display: block; }
        }
        @media screen and (max-width: 600px) {
            main .insights { grid-template-columns: 1fr; }
            .chart-container { height: 250px; }
        }

        .modal-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 200000; align-items: center; justify-content: center; }
        .vip-modal { background: var(--color-white); border-radius: 2rem; padding: 2rem; text-align: center; width: 90%; max-width: 400px; }
        #cursor-glow { position: fixed; width: 300px; height: 300px; background: radial-gradient(circle, rgba(115, 128, 236, 0.1) 0%, transparent 70%); pointer-events: none; z-index: 99999; transform: translate(-50%, -50%); }
    </style>
</head>
<body>

    <div id="cursor-glow"></div>
    <audio id="bgMusic" loop src="https://files.catbox.moe/97p877.mp3"></audio>

    <div id="auth-screen">
        <div class="auth-container" id="auth-container">
            <div class="form-container sign-up"><form><h1>Hesap Oluştur</h1><input type="text" id="rName" class="auth-input" placeholder="Kullanıcı Adı"><input type="password" id="rPass" class="auth-input" placeholder="Şifre"><button type="button" class="auth-btn" onclick="handleRegister()">KAYDOL</button></form></div>
            <div class="form-container sign-in"><form><h1>Giriş Yap</h1><input type="text" id="lName" class="auth-input" placeholder="Kullanıcı Adı"><input type="password" id="lPass" class="auth-input" placeholder="Şifre"><button type="button" class="auth-btn" onclick="doLogin()">GİRİŞ YAP</button><button type="button" class="auth-btn" onclick="doGuest()" style="background: #333; margin-top: 5px; padding: 8px 20px; font-size: 10px;">MİSAFİR</button></form></div>
            <div class="toggle-container"><div class="toggle"><div class="toggle-panel toggle-left"><h1>Tekrar Hoşgeldin!</h1><button class="auth-btn" style="background:transparent; border:1px solid white;" id="loginBtn">GİRİŞ YAP</button></div><div class="toggle-panel toggle-right"><h1>Selam Dostum!</h1><button class="auth-btn" style="background:transparent; border:1px solid white;" id="registerBtn">KAYDOL</button></div></div></div>
        </div>
    </div>

    <div id="dashboard">
        <aside>
            <div class="top"><div class="logo"><h2 style="font-family:'VALORANT'; color:var(--v-purple)">NEXUS</h2></div></div>
            <div class="sidebar">
                <a class="active"><span class="material-icons-sharp">grid_view</span><h3>Dashboard</h3></a>
                <a onclick="toggleMusic()"><span class="material-icons-sharp">music_note</span><h3 id="m-text">Müzik: Kapalı</h3></a>
                <a onclick="openVip()"><span class="material-icons-sharp">workspace_premium</span><h3>VIP Panel</h3></a>
                <a onclick="location.reload()"><span class="material-icons-sharp">logout</span><h3>Çıkış Yap</h3></a>
            </div>
        </aside>

        <main>
            <h1>Sistem Paneli</h1>
            <div class="insights" id="main-grid">
                <div onclick="window.open('https://tracker.gg/valorant', '_blank')"><span class="material-icons-sharp" style="color:var(--v-cyan)">analytics</span><h3>STATÜ ANALİZİ</h3></div>
                <div onclick="window.open('https://vcrdb.net/', '_blank')"><span class="material-icons-sharp" style="color:var(--v-cyan)">ads_click</span><h3>NİŞANGAH</h3></div>
                <div onclick="window.open('https://playvalorant.com/tr-tr/maps/', '_blank')"><span class="material-icons-sharp" style="color:var(--v-orange)">map</span><h3>HARİTALAR</h3></div>
                <div onclick="window.open('https://playvalorant.com/tr-tr/agents/', '_blank')"><span class="material-icons-sharp" style="color:var(--v-orange)">groups</span><h3>AJANLAR</h3></div>
                <div onclick="window.open('https://lineupsvalorant.com/', '_blank')"><span class="material-icons-sharp" style="color:var(--v-pink)">gps_fixed</span><h3>LINEUPS</h3></div>
                <div onclick="window.open('https://www.vlr.gg/', '_blank')"><span class="material-icons-sharp" style="color:var(--v-pink)">emoji_events</span><h3>ESPORT</h3></div>
            </div>

            <div class="chart-container">
                <h2 id="realtime-status" style="font-size: 0.9rem; margin-bottom: 0.5rem; color:var(--color-info-dark)">Aktivite Yükleniyor...</h2>
                <canvas id="myChart"></canvas>
            </div>
        </main>

        <div class="right">
            <div class="top"><div class="profile"><div class="info"><p>Selam, <b id="disp-user">...</b></p><small class="text-muted" id="user-status">Standart Üye</small></div></div></div>
            <div class="global-chat-modern">
                <h3>Global Chat</h3>
                <div id="chat-messages"></div>
                <div class="chat-input-area"><input type="text" id="chatMsg" placeholder="Mesaj yazın..."><button onclick="sendChat()" class="material-icons-sharp" style="cursor:pointer; background:none; color:var(--v-purple)">send</button></div>
            </div>
        </div>
    </div>

    <div id="vip-overlay" class="modal-overlay">
        <div class="vip-modal">
            <h2 style="font-family:'VALORANT'; color:var(--v-purple)">VIP PANEL</h2>
            <p style="margin: 1rem 0;"><a href="https://www.instagram.com/ahmet_57z" target="_blank" style="color:var(--v-pink)">@ahmet_57z</a></p>
            <div id="guest-msg" style="display:none; color:red; margin-bottom:1rem;">KAYITLI HESAP GEREKLİ!</div>
            <div id="vip-input-area"><input id="vCode" class="auth-input" placeholder="VIP KODUNUZU GİRİN" style="text-align:center; border: 1px solid #ddd;"><button class="auth-btn" style="width:100%" onclick="activateVip()">ONAYLA</button></div>
            <button onclick="closeVip()" style="margin-top:2rem; cursor:pointer; background:none; color:var(--color-info-dark)">KAPAT</button>
        </div>
    </div>

    <script>
        const authContainer = document.getElementById('auth-container');
        document.getElementById('registerBtn').addEventListener('click', () => authContainer.classList.add("active"));
        document.getElementById('loginBtn').addEventListener('click', () => authContainer.classList.remove("active"));

        const config = { apiKey: "AIzaSyBC_h0zpRSSGdzcbtGsq3Bh2WGKAgTrNKc", authDomain: "vanguardnexus-a2871.firebaseapp.com", databaseURL: "https://vanguardnexus-a2871-default-rtdb.firebaseio.com", projectId: "vanguardnexus-a2871" };
        firebase.initializeApp(config); const db = firebase.database();

        let myChartInstance;
        function setupRealtimeTracking() {
            db.ref('stats/totalVisits').transaction(c => (c || 0) + 1);
            const activeRef = db.ref('stats/activeNow');
            const myPresence = activeRef.push();
            myPresence.onDisconnect().remove();
            myPresence.set(true);
            db.ref('stats').on('value', s => {
                const data = s.val() || { activeNow: {}, totalVisits: 0 };
                const activeCount = Object.keys(data.activeNow || {}).length;
                const totalCount = data.totalVisits || 0;
                document.getElementById('realtime-status').innerHTML = `Canlı Aktif: ${activeCount} | Toplam Ziyaret: ${totalCount}`;
                updateChart(activeCount);
            });
        }

        function initChart() {
            const ctx = document.getElementById('myChart').getContext('2d');
            myChartInstance = new Chart(ctx, { 
                type: 'line', 
                data: { labels: [''], datasets: [{ label: 'Aktif', data: [0], borderColor: '#7380ec', tension: 0.4, fill: true, backgroundColor: 'rgba(115, 128, 236, 0.1)' }] },
                options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true, ticks: { stepSize: 1 } } } }
            });
            setupRealtimeTracking();
        }

        function updateChart(count) {
            if(!myChartInstance) return;
            const now = new Date().toLocaleTimeString();
            myChartInstance.data.labels.push(now);
            myChartInstance.data.datasets[0].data.push(count);
            if(myChartInstance.data.labels.length > 7) { myChartInstance.data.labels.shift(); myChartInstance.data.datasets[0].data.shift(); }
            myChartInstance.update();
        }

        function doLogin() {
            const u = document.getElementById("lName").value.trim(), p = document.getElementById("lPass").value.trim();
            if(u === "ADMIN" && p === "1200778") { loginSuccess(u, true); return; }
            db.ref('users/'+u).once('value').then(s => {
                if(s.exists() && s.val().password === p) loginSuccess(u, s.val().isVip);
                else alert("Hata!");
            });
        }

        function loginSuccess(u, vip) {
            sessionStorage.setItem("user", u);
            document.getElementById("auth-screen").style.display = "none";
            document.getElementById("dashboard").style.display = "grid";
            document.getElementById("disp-user").innerText = u;
            initChart();
            if(vip) applyVipLayout();
        }

        function applyVipLayout() {
            document.getElementById('user-status').innerText = "VIP ÜYE";
            document.getElementById('user-status').style.color = "var(--color-success)";
            const vg = document.getElementById('main-grid');
            vg.innerHTML += `
                <div onclick="window.open('https://www.metasrc.com/valorant', '_blank')" style="border:2px solid var(--v-purple)"><span class="material-icons-sharp" style="color:var(--v-purple)">bolt</span><h3>VIP: META</h3></div>
                <div onclick="window.open('https://valorant.fandom.com/wiki/Skins', '_blank')" style="border:2px solid var(--v-purple)"><span class="material-icons-sharp" style="color:var(--v-purple)">auto_awesome</span><h3>VIP: SKINS</h3></div>
                <div onclick="window.open('https://tracker.gg/valorant/guides', '_blank')" style="border:2px solid var(--v-purple)"><span class="material-icons-sharp" style="color:var(--v-purple)">menu_book</span><h3>VIP: PRO MAPS</h3></div>
            `;
        }

        function activateVip() {
            const code = document.getElementById('vCode').value, u = sessionStorage.getItem("user");
            if(code === "VN-9928-XQ71-PL00" && u !== "MİSAFİR") {
                db.ref('users/'+u).update({isVip:true}).then(() => { alert("VIP AKTİF!"); location.reload(); });
            } else alert("Geçersiz Kod!");
        }

        function openVip() { document.getElementById('vip-overlay').style.display = 'flex'; if(sessionStorage.getItem("user") === "MİSAFİR") { document.getElementById('guest-msg').style.display = 'block'; document.getElementById('vip-input-area').style.display = 'none'; } }
        function closeVip() { document.getElementById('vip-overlay').style.display = 'none'; }
        function handleRegister() { const u = document.getElementById('rName').value.trim(), p = document.getElementById('rPass').value.trim(); if(u && p) db.ref('users/'+u).set({password:p, isVip:false}).then(() => { alert("Kayıt Başarılı!"); authContainer.classList.remove("active"); }); }
        function sendChat() { const m = document.getElementById('chatMsg').value, u = sessionStorage.getItem("user"); if(m.trim() && u) { db.ref('chat').push({u: u, m: m}); document.getElementById('chatMsg').value = ""; } }
        db.ref('chat').limitToLast(15).on('value', s => { const b = document.getElementById('chat-messages'); b.innerHTML = ""; s.forEach(c => { b.innerHTML += `<div style="margin-bottom:0.5rem"><b>${c.val().u}:</b> ${c.val().m}</div>`; }); b.scrollTop = b.scrollHeight; });
        function toggleMusic() { const m = document.getElementById('bgMusic'); isPlaying ? m.pause() : m.play(); document.getElementById('m-text').innerText = isPlaying ? "Müzik: Kapalı" : "Müzik: Çalıyor"; isPlaying = !isPlaying; }
        let isPlaying = false;
        function doGuest() { loginSuccess("MİSAFİR", false); }
        window.onmousemove = e => { const g = document.getElementById('cursor-glow'); g.style.left = e.clientX + 'px'; g.style.top = e.clientY + 'px'; };
    </script>
</body>
</html>
